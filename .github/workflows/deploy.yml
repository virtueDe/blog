name: deploy

on:
  push:
    branches: [master] # master åˆ†æ”¯æœ‰ push æ—¶è§¦å‘
    paths-ignore:   # ä¸‹åˆ—æ–‡ä»¶çš„å˜æ›´ä¸è§¦å‘éƒ¨ç½²ï¼Œå¯ä»¥è‡ªè¡Œæ·»åŠ 
      - README.md

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:

      # ä¸‹è½½æºç 
      # è¿™ä¸€æ­¥å°±æ˜¯æ£€å‡ºä½ çš„ä»“åº“å¹¶ä¸‹è½½é‡Œé¢çš„ä»£ç åˆ°runnerä¸­,actions/checkout@v2æ˜¯å®˜æ–¹è‡ªå·±é€ çš„è½®å­ï¼Œç›´æ¥æ‹¿æ¥ç”¨å°±è¡Œ
      - name: Checkout
        uses: actions/checkout@v2

      # æ‰“åŒ…æ„å»º
      - name: Build
        uses: actions/setup-node@master
        with:
          node-version: '16.x'
      - run: yarn # å®‰è£…ä¾èµ–
      - run: yarn docs:build # æ‰“åŒ…

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@4.1.3
        with:
          BRANCH: gh-pages
          FOLDER: docs/.vuepress/dist
          ACCESS_TOKEN: ${{ secrets.DEPLOY_SECRET }}

      # éƒ¨ç½²åˆ° GitHub pages
      # - name: Deploy
      #   uses: JamesIves/github-pages-deploy-action@v4.3.0 # ä½¿ç”¨éƒ¨ç½²åˆ° GitHub pages çš„ action
      #   with:
      #     branch: gh-pages # The branch the action should deploy to.
      #     publish_dir: docs/.vuepress/dist # éƒ¨ç½²æ‰“åŒ…åçš„ dist ç›®å½•
      #     github_token: ${{ secrets.DEPLOY_SECRET }} # secret å
      #     user_name: ${{ secrets.MY_USER_NAME }}
      #     user_email: ${{ secrets.MY_USER_EMAIL }}
      #     commit_message: è‡ªåŠ¨éƒ¨ç½² # éƒ¨ç½²æ—¶çš„ git æäº¤ä¿¡æ¯ï¼Œè‡ªç”±å¡«å†™